# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –¥–µ–ø–ª–æ–µ

## –ü—Ä–æ–±–ª–µ–º–∞: `next: –∫–æ–º–∞–Ω–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`

### –ü—Ä–∏—á–∏–Ω–∞
–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ (`node_modules` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç).

### –†–µ—à–µ–Ω–∏–µ

```bash
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/u3327901/data/www/Panda-vpn-main

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Node.js (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 18+)
node -v

# 4. –ï—Å–ª–∏ Node.js —Å—Ç–∞—Ä—ã–π, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ nvm –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ
# –î–ª—è reg.ru —Ö–æ—Å—Ç–∏–Ω–≥–∞ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

# 5. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
npm run build
```

---

## –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è Node.js

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏

```bash
node -v
```

### –ï—Å–ª–∏ –≤–µ—Ä—Å–∏—è < 18

**–í–∞—Ä–∏–∞–Ω—Ç 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ nvm (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø)**

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
source ~/.bashrc

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js 20
nvm install 20
nvm use 20
nvm alias default 20
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è reg.ru**

1. –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ö–æ—Å—Ç–∏–Ω–≥–æ–º
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "Node.js" –∏–ª–∏ "–í–µ—Ä—Å–∏–∏ Node.js"
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä—Å–∏—é 20.x –∏–ª–∏ 18.x
4. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ Node.js**

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
which node
/usr/bin/node --version

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä (—Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ sudo)
# –ù–æ –Ω–∞ shared —Ö–æ—Å—Ç–∏–Ω–≥–µ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ
```

---

## –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ

### –†–µ—à–µ–Ω–∏–µ

```bash
# –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç –ø–∞–º—è—Ç–∏ –¥–ª—è Node.js
export NODE_OPTIONS="--max-old-space-size=4096"

# –ò–ª–∏ —Å–æ–±–µ—Ä–∏—Ç–µ –±–µ–∑ turbopack (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏)
npm run build -- --no-turbopack
```

–ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ `package.json`:

```json
{
  "scripts": {
    "build": "next build",
    "build:turbo": "next build --turbopack"
  }
}
```

---

## –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –†–µ—à–µ–Ω–∏–µ

```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à npm
npm cache clean --force

# –£–¥–∞–ª–∏—Ç–µ node_modules –∏ package-lock.json
rm -rf node_modules package-lock.json

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
npm install
```

---

## –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –†–µ—à–µ–Ω–∏–µ

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
ls -la /var/www/u3327901/data/www/Panda-vpn-main

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –∏–∑–º–µ–Ω–∏—Ç–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞ (–º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–æ–º–æ—â—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
# chown -R u3327901:u3327901 /var/www/u3327901/data/www/Panda-vpn-main
```

---

## –ü–æ–ª–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ reg.ru —Ö–æ—Å—Ç–∏–Ω–≥–µ

```bash
# 1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/u3327901/data/www/Panda-vpn-main

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Node.js
node -v
# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å 18.x –∏–ª–∏ 20.x

# 3. –ï—Å–ª–∏ Node.js –Ω–µ—Ç –∏–ª–∏ —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å reg.ru
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ nvm (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)

# 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# 5. –°–æ–∑–¥–∞–π—Ç–µ .env.production
nano .env.production
# –î–æ–±–∞–≤—å—Ç–µ: NEXT_PUBLIC_API_URL=https://api.your-domain.com

# 6. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
npm run build

# 7. –ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞, –∑–∞–ø—É—Å—Ç–∏—Ç–µ
npm start
```

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –°–±–æ—Ä–∫–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ

–ï—Å–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–±–ª–µ–º—ã, –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å:

```bash
# –ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ
npm run build

# –°–æ–∑–¥–∞–π—Ç–µ –∞—Ä—Ö–∏–≤ (–∏—Å–∫–ª—é—á–∞—è node_modules –∏ .next)
tar -czf panda-vpn-build.tar.gz \
  --exclude='node_modules' \
  --exclude='.next' \
  --exclude='.git' \
  .

# –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp panda-vpn-build.tar.gz u3327901@server287.reg.ru:/var/www/u3327901/data/www/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ä–∞—Å–ø–∞–∫—É–π—Ç–µ
cd /var/www/u3327901/data/www/Panda-vpn-main
tar -xzf ../panda-vpn-build.tar.gz

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–æ–ª—å–∫–æ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install --production

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ
npm start
```

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ next —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
npx next --version

# –ò–ª–∏
./node_modules/.bin/next --version

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
ls -la
ls -la node_modules/.bin/ | grep next
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ npx

–ï—Å–ª–∏ `next` –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ PATH, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `npx`:

```bash
# –í–º–µ—Å—Ç–æ npm run build
npx next build

# –ò–ª–∏
./node_modules/.bin/next build
```

–ú–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `package.json`:

```json
{
  "scripts": {
    "build": "npx next build",
    "start": "npx next start"
  }
}
```

